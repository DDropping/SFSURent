<!--

Listing Page displays all current listings in DB.

-->

<%- include('../_partials/header'); %>

<style>
  .top-section {
    background: url(/images/backgroundFade.jpg);
    background-repeat: no-repeat;
    background-size: cover;
    background-attachment: fixed;
    min-height: 75vh;
  }

  .formBG {
    background: #343a40;
  }
</style>

<!--///////////////////////////////////-->

<body>
  <div class="top-section">
    <%- include('../_partials/filters2'); %>
    <div class="row ">
      <% if(objectArrayFromDb.length < 1) { %>
      <h2>no result</h2>
      <% } else { %> <% for(var i=0; i < objectArrayFromDb.length; i++) { %> <%
      var image_b64 = new Buffer(objectArrayFromDb[i].thumb).toString('base64')
      %>
      <div class="p-1">
        <div class="card" style="width: 20rem;">
          <img
            class="card-img-top"
            src="data:image/jpg;base64,<%= image_b64 %>"
            alt="<%= objectArrayFromDb[i].title %>"
          />
          <div class="card-body">
            <h5 class="card-title"><%= objectArrayFromDb[i].title %></h5>
            <p class="card-text">
              <%= objectArrayFromDb[i].description %>
            </p>
            <a
              href="/listing/<%= objectArrayFromDb[i].id %>"
              class="btn btn-primary"
              >View Listing</a
            >
          </div>
        </div>
      </div>

      <% } %> <% } %>
      <!--end cards-->
    </div>
  </div>
</body>
<%- include('../_partials/footer'); %>
